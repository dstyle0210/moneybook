<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Welcome to Firebase Hosting</title>

    <script crossorigin src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script defer src="/__/firebase/9.6.1/firebase-app-compat.js"></script>
    <script defer src="/__/firebase/9.6.1/firebase-database-compat.js"></script>
    <script defer src="/__/firebase/9.6.1/firebase-auth-compat.js"></script>
    <script defer src="/__/firebase/init.js?useEmulator=true"></script>
    <script defer src="./js/uikit.js"></script>
    <script defer src="./js/page.js"></script>
    
    

    <style media="screen">
      
    </style>
  </head>
  <body>


    <a href="#" onclick="login();return false;">Î°úÍ∑∏Ïù∏</a>
    <a href="write.html">Îì±Î°ùÌïòÍ∏∞</a>
    

    


    <div>Î°úÎî©Ï§ë</div>
    <div id="data"></div>
    <div id="load"></div>
    <div id="reactRoot"></div>
    <div id="reactRoot2"></div>

    <script>
      



      



      // // üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•
        // // The Firebase SDK is initialized and available here!
        //
        // firebase.auth().onAuthStateChanged(user => { });
        // firebase.database().ref('/path/to/ref').on('value', snapshot => { });
        // firebase.firestore().doc('/foo/bar').get().then(() => { });
        // firebase.functions().httpsCallable('yourFunction')().then(() => { });
        // firebase.messaging().requestPermission().then(() => { });
        // firebase.storage().ref('/path/to/ref').getDownloadURL().then(() => { });
        // firebase.analytics(); // call to activate
        // firebase.analytics().logEvent('tutorial_completed');
        // firebase.performance(); // call to activate
        //
        // // üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•üî•
        var gtoken,guser;
        function login(){
          const $data = $("#data");
          var provider = new firebase.auth.GoogleAuthProvider();
          firebase.auth().signInWithPopup(provider).then(function(result) {
            
            firebase.auth().onAuthStateChanged(user => { 
              console.log(user);
            });

            var user2 = result.user;
            console.log(user2);
          
            firebase.database().ref('/payment').on('value', snapshot => {
              $data.text(JSON.stringify(snapshot.val()));
            });

            }).catch(function(error) {
              // Handle Errors here.
              var errorCode = error.code;
              var errorMessage = error.message;
              // The email of the user's account used.
              var email = error.email;
              // The firebase.auth.AuthCredential type that was used.
              var credential = error.credential;
              // ...
            });
        };
      $(function(){
        const $load = $("#load");
        const $data = $("#data");
        try {
          firebase.auth().onAuthStateChanged(user => { 
            console.log(user);
          });

          // Íµ¨Í∏Ä Ïù∏Ï¶ù Í∏∞Îä• Ï∂îÍ∞Ä
          /*
          var provider = new firebase.auth.GoogleAuthProvider();
          firebase.auth().signInWithPopup(provider);
          // Ïù∏Ï¶ùÌïòÍ∏∞
          firebase.auth().signInWithPopup(provider).then(function(result) {
            // This gives you a Google Access Token. You can use it to access the Google API.
            var token = gtoken = result.credential.accessToken;
            // The signed-in user info.
            var user = result.user;
            guser = firebase.auth().currentUser;
            
            console.log(user)		// Ïù∏Ï¶ù ÌõÑ Ïñ¥Îñ§ Îç∞Ïù¥ÌÑ∞Î•º Î∞õÏïÑÏò§ÎäîÏßÄ ÌôïÏù∏Ìï¥Î≥¥Í∏∞ ÏúÑÌï®.
          }).catch(function(error) {
            // Handle Errors here.
            var errorCode = error.code;
            var errorMessage = error.message;
            // The email of the user's account used.
            var email = error.email;
            // The firebase.auth.AuthCredential type that was used.
            var credential = error.credential;
            // ...
          });
          */



          let app = firebase.app();
          let features = [
            'auth', 
            'database', 
            'firestore',
            'functions',
            'messaging', 
            'storage', 
            'analytics', 
            'remoteConfig',
            'performance',
          ].filter(feature => typeof app[feature] === 'function');
          $load.text(`Firebase SDK loaded with ${features.join(', ')}`);

          firebase.database().ref('/payment').on('value', snapshot => {
            $data.text(JSON.stringify(snapshot.val()));
          });
           

        } catch (e) {
          console.error(e);
          $load.text('Error loading the Firebase SDK, check the console.');
        };
      });
    </script>
  </body>
</html>
